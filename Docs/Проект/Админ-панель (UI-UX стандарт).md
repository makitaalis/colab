# Админ-панель (UI-UX стандарт)

Документ фиксирует единый стиль и дизайн web-панели, чтобы операторам было проще воспринимать состояние системы, статистику и приоритеты действий.

## Область действия

Стандарт обязателен для всех UI-страниц админки:

- `/admin`
- `/admin/commission`
- `/admin/fleet*`
- `/admin/audit`
- `/admin/wg`

Архитектурная база `Core + Domains` для admin/client зафиксирована в:

- `Docs/Проект/Веб-панель (ядро и домены).md`
- `Docs/Проект/Веб-панель/Архитектура меню (admin+client).md`
- `Docs/Проект/Операции/Стратегия доработки веб-панели (admin+client).md`

## 1) Информационная иерархия страницы

Каждая рабочая страница должна соблюдать один и тот же порядок блоков:

1. Header toolbar: обновление, роль, быстрый поиск, refresh/copy-link.
2. Сворачиваемый блок фильтров `<details class="toolbarDetails">`.
3. Краткое резюме фильтров (`фільтри: ...` / `контекст: ...`).
4. KPI-блок (сводные метрики состояния).
5. Основная таблица/лента с источником и сортировкой (`tableMeta`).
6. Вторичные блоки (история, уведомления, действия, диагностика).

Правило: оператор должен за 3–5 секунд видеть `статус -> риск -> что делать дальше`.

## 2) Семантика статусов и цвета

Семантика едина для всех модулей:

- `good`: нормальное состояние.
- `warn`: риск или деградация без критического отказа.
- `bad`: критическая проблема, требует приоритетной реакции.
- `open`: инцидент активен.
- `acked`: инцидент принят оператором.
- `silenced`: оповещение временно заглушено.
- `resolved`: инцидент закрыт.

Запрещено вводить новые статусы с дублирующим смыслом без обновления этого документа.

## 3) Стандарты для статистики и KPI

- KPI-карточки показывают только ключевые числа, без длинных описаний.
- Подписи KPI короткие и однозначные (один показатель на карточку).
- Критичные KPI (`bad`, SLA breach, failed notifications) размещаются первыми.
- Всегда указывать источник данных (`/api/...`) рядом с таблицей/блоком.
- Сортировку и окно данных показывать явно в `tableMeta`.

## 4) Таблицы и списки

- Единый порядок ключевых колонок: `статус/уровень -> узел -> код -> время/возраст -> действие`.
- Длинные тексты не должны ломать layout: использовать `tableWrap` и перенос/усечение.
- Массовые действия показывать отдельным action-bar с явным счётчиком выбранных строк.
- Порядок operator-кнопок единый: `Підтвердити -> Пауза 1 год -> Зняти заглушення`.

## 5) Фильтры, URL и навигация

- Все фильтры должны синхронизироваться с query string.
- Каноничные параметры: `snake_case` (`include_resolved`, `sla_breached_only` и т.д.).
- Кнопки `Скинути фільтри` и `Скопіювати посилання` обязательны для рабочих страниц.
- Текстовые фильтры: debounce `~250-300ms` + Enter для немедленного запуска.
- Refresh не должен сбрасывать выбранные фильтры/контекст.

## 6) Состояния экрана и ошибки

- Обязательные состояния: `loading`, `empty`, `filtered-empty`, `error`.
- `empty` и `filtered-empty` должны различаться текстом и подсказкой следующего шага.
- Ошибки API показывать в status-блоке страницы, без белого экрана и без потери контекста фильтров.

## 7) Адаптивность и доступность

- На mobile/tablet сохранять читаемость KPI и доступ к основным действиям.
- Для широких таблиц использовать горизонтальный scroll в `tableWrap`.
- Минимум интерактивных элементов:
  - кнопки: высота не меньше `36px`;
  - поля ввода: высота не меньше `36px`.
- Критичные действия не скрывать только за hover/tooltip.

## 8) Текст и терминология

- UI-копия: UA-first.
- Идентификаторы всегда писать явно: `central_id`, `system_id`, `door_id`.
- Не смешивать формулировки для одного действия (например, не чередовать `Ack` и `Підтвердити` на разных страницах).
 - Header chips не должны дублировать навигацию (не превращать header в “второе меню”); навигация живёт в sidebar + page-subnav.

## 9) Definition of Done для UI/UX-изменений

Перед завершением этапа:

1. Страница соответствует разделам 1–8 этого стандарта.
2. Ключевые фильтры и ссылки shareable через URL.
3. Данные/статистика читаются без открытия дополнительных панелей.
4. `scripts/admin_panel_smoke_gate.sh` проходит без ошибок.
5. Обновлены профильные docs:
   - `Docs/Проект/Админ-панель (модульная разработка).md`
   - `Docs/Проект/Операции/Админка модульные этапы.md`
   - `Docs/Проект/Паспорт релиза документации.md` (если менялся стандарт/процесс)

## 10) Поэтапное внедрение стандарта

1. Этап 1: зафиксировать единый стандарт в документации. ✅
2. Этап 2: провести аудит всех `/admin*` страниц по чеклисту раздела 9.
3. Этап 3: исправить high-impact экраны (`/admin`, `/admin/fleet`, `/admin/fleet/alerts`, `/admin/fleet/incidents`).
4. Этап 4: выровнять остальные страницы и закрыть rollout через smoke-gate.

## 11) Архитектура меню и подменю (IA 2026)

Цель: убрать визуальную перегрузку левого меню и упростить переходы между близкими по смыслу страницами.

Правила:

- Левое меню — 2 уровня: `раздел -> подменю`.
- В sidebar по умолчанию раскрыт только активный раздел; остальные разделы свернуты.
- В `Simple`-режиме скрываются вторичные блоки sidebar и `quick-jump`, чтобы оставить только основной каркас навигации.
- В `Розширено`-режиме вторичные мини-блоки sidebar (hub/mission/shortcuts) должны быть сворачиваемыми и persistent, чтобы не превращать меню в длинную “простыню”.
- На странице под header показывается контекстное `подменю раздела` (page subnav), чтобы оператор видел соседние страницы текущей категории.

Каноничная структура:

1. `Старт`
- `Огляд системи` (`/admin`)
- `Підключення` (`/admin/commission`)
2. `Флот`
- `Стан флоту` (`/admin/fleet`)
- `Алерти` (`/admin/fleet/alerts`)
- `Інциденти` (`/admin/fleet/incidents`)
- `Дії операторів` (`/admin/fleet/actions`)
3. `Сповіщення`
- `Доставка` (`/admin/fleet/notify-center`)
- `Правила каналів` (`/admin/fleet/notifications`)
4. `Контроль і KPI`
- `Історія KPI` (`/admin/fleet/history`)
- `Політика` (`/admin/fleet/policy`)
- `Аудит` (`/admin/audit`)
5. `Інфраструктура`
- `WireGuard` (`/admin/wg`)

## 12) Рекомендации по разделению перегруженных страниц

- На страницах с большим количеством блоков приоритетно выносить “вторичный анализ” в соседнюю страницу текущего раздела, а не добавлять новый длинный блок на текущую.
- `Флот`: основная страница — только оперативный срез; детальный triage и история — в `alerts/incidents/history`.
- `Сповіщення`: правила каналов и операционная доставка не смешиваются на одной странице.
- `Контроль і KPI`: policy-настройки и audit-лента разделяются, чтобы не смешивать конфиг и контроль исполнения.

## 13) Внешние UX-референсы (2025–2026)

- Atlassian Design System — Navigation system:
  - https://atlassian.design/components/navigation-system/
- Fluent 2 (Microsoft) — Navigation:
  - https://fluent2.microsoft.design/components/web/react/core/nav/usage
  - https://fluent2.microsoft.design/components/web/react/core/drawer/usage
- Shopify Polaris — Information architecture:
  - https://shopify.dev/docs/apps/build/design-considerations/information-architecture
- Material Design 3 — Navigation best practices:
  - https://m3.material.io/foundations/navigation/understanding-navigation
