# Домен Інфраструктура

## Назначение

Сетевой контур и WireGuard-операции.

## Route scope

- `/admin/wg`

## API scope

- `/api/admin/wg/peers`
- `/api/admin/wg/conf`

## UX-контракт домена

1. Чёткий статус peer/handshake.
2. Минимум действий, максимум диагностической ясности.
3. Быстрый переход обратно в operational-домены.

## Ограничения

- не дублировать fleet-таблицы и KPI-историю;
- не превращать страницу в общий “debug dashboard”.

## Definition of Done

1. Сетевые данные читаемы без глубокого техконтекста.
2. Есть `copyLink` и `filterSummary`.
3. Ошибки API отображаются в статусе страницы, без белого экрана.

## Прогресс content-split (2026-02-16)

- `/admin/wg` разгружен по сценарию:
  - primary: базовая сетевая диагностика peer/handshake + агрегаты по статусам;
  - secondary: серверный WG-конфиг вынесен в сворачиваемый блок.
- Состояние secondary-блока сохраняется локально:
  - key: `passengers_admin_wg_secondary_details_v1`.
- UX-эффект:
  - на первом экране остаётся только операторски важная диагностика peer-состояний;
  - глубокий разбор конфигурации доступен по запросу без визуальной перегрузки.

## Прогресс visual polish (2026-02-17)

- `/admin/wg` доведен по visual-density:
  - `wgSecondaryDetails` помечен `data-advanced-details="1"` (Simple-mode схлопывает);
  - добавлен `tableMeta` над таблицей (source + update + SLA handshake);
  - primary toolbar очищен (без кнопки конфіга; конфіг доступен в secondary).
